{"version":3,"sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","app.min.js","src/scripts/app.js","src/scripts/controllers/CheckoutCtrl.js","src/scripts/controllers/DonationCtrl.js","src/scripts/controllers/PaymentCompletedCtrl.js","src/scripts/models/DonationModel.js","src/scripts/services/DonationService.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length",1,"module","_interopRequireDefault","obj","__esModule","default","_controllersDonationCtrl","_controllersDonationCtrl2","_controllersCheckoutCtrl","_controllersCheckoutCtrl2","_controllersPaymentCompletedCtrl","_controllersPaymentCompletedCtrl2","_servicesDonationService","_servicesDonationService2","angular","controller","service","config","$routeProvider","$httpProvider","when","templateUrl","controllerAs","otherwise","redirectTo","interceptors","push","$q","$location","$localStorage","request","headers","constant","url","authData","authentication.userId","authentication.password","authentication.entityId","paymentType","run","DonationService","$rootScope","$on","event","next","current","isUserAllowedToDonate","path","getRemainingTimeUntilNextDonation","restoreDonation","./controllers/CheckoutCtrl","./controllers/DonationCtrl","./controllers/PaymentCompletedCtrl","./services/DonationService",2,"_classCallCheck","instance","Constructor","TypeError","Object","defineProperty","value","_createClass","defineProperties","target","props","descriptor","enumerable","configurable","writable","key","protoProps","staticProps","prototype","CheckoutCtrl","this","donationData","isValid","donationService","paymentInfo","isRequestActive","location","localStorage","$inject","paymentForm","_this","$valid","Materialize","toast","onError","response","onSuccess","data","paidOnTimeStamp","Date","getTime","performPayment",3,"_modelsDonationModel","_modelsDonationModel2","DonationCtrl","donateData","currencyOptions","currency","val","donateForm","some","ele","isNaN","parseFloat","amount","saveDonationData","../models/DonationModel",4,"PaymentCompletedCtrl","$scope","endTime","getPaymentInformation","scope","paymentInformation","onTimerStopped","$apply",5,"DonationModel","get","label",6,"$resource","ConfigData","resource","donationDataObject","configData","requestData","expiry","split","card","number","cvv","$","extend","save","param","$promise","then","responseData","id"],"mappings":"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","file":"app.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n/*\r\n Import all Angular components via ES6 imports and register them\r\n at your module via their corresponding functions (controller, service, etc.).\r\n */\n\n'use strict';\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _controllersDonationCtrl = require('./controllers/DonationCtrl');\n\nvar _controllersDonationCtrl2 = _interopRequireDefault(_controllersDonationCtrl);\n\nvar _controllersCheckoutCtrl = require('./controllers/CheckoutCtrl');\n\nvar _controllersCheckoutCtrl2 = _interopRequireDefault(_controllersCheckoutCtrl);\n\nvar _controllersPaymentCompletedCtrl = require('./controllers/PaymentCompletedCtrl');\n\nvar _controllersPaymentCompletedCtrl2 = _interopRequireDefault(_controllersPaymentCompletedCtrl);\n\nvar _servicesDonationService = require('./services/DonationService');\n\nvar _servicesDonationService2 = _interopRequireDefault(_servicesDonationService);\n\nangular.module('chancletagithubioApp', ['ngResource', 'ngRoute', 'ngStorage', 'angularPayments', 'timer']).controller('DonationCtrl', _controllersDonationCtrl2['default']).controller('CheckoutCtrl', _controllersCheckoutCtrl2['default']).controller('PaymentCompletedCtrl', _controllersPaymentCompletedCtrl2['default']).service('DonationService', _servicesDonationService2['default']).config([\"$routeProvider\", \"$httpProvider\", function ($routeProvider, $httpProvider) {\n    $routeProvider.when('/', {\n        templateUrl: 'views/donationForm.html',\n        controller: 'DonationCtrl',\n        controllerAs: 'donation'\n    }).when('/checkout', {\n        templateUrl: 'views/checkoutForm.html',\n        controller: 'CheckoutCtrl',\n        controllerAs: 'checkout'\n    }).when('/paymentCompleted', {\n        templateUrl: 'views/paymentCompleted.html',\n        controller: 'PaymentCompletedCtrl',\n        controllerAs: 'completed'\n    }).otherwise({\n        redirectTo: '/'\n    });\n    $httpProvider.interceptors.push(['$q', '$location', '$localStorage', function ($q, $location, $localStorage) {\n        return {\n            'request': function request(config) {\n                config.headers = config.headers || {};\n                config.headers['Content-Type'] = 'application/x-www-form-urlencoded; charset=UTF-8';\n                return config;\n            }\n        };\n    }]);\n}]).constant(\"ConfigData\", {\n    url: \"https://test.oppwa.com/v1/payments\",\n    authData: {\n        'authentication.userId': \"8a8294174b7ecb28014b9699220015cc\",\n        'authentication.password': \"sy6KJsT8\",\n        'authentication.entityId': \"8a8294174b7ecb28014b9699220015ca\"\n    },\n    paymentType: \"DB\"\n}).run([\"DonationService\", \"$location\", \"$rootScope\", function (DonationService, $location, $rootScope) {\n\n    $rootScope.$on(\"$routeChangeStart\", function (event, next, current) {\n\n        if (next.templateUrl != \"views/paymentCompleted.html\") {\n            if (!DonationService.isUserAllowedToDonate()) {\n                $location.path(\"/paymentCompleted\");\n            }\n        } else {\n            if (DonationService.isUserAllowedToDonate()) {\n                $location.path(\"/\");\n            }\n        }\n\n        if (DonationService.getRemainingTimeUntilNextDonation() <= 0) {\n            DonationService.restoreDonation();\n        }\n    });\n}]);\n\n},{\"./controllers/CheckoutCtrl\":2,\"./controllers/DonationCtrl\":3,\"./controllers/PaymentCompletedCtrl\":4,\"./services/DonationService\":6}],2:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar CheckoutCtrl = (function () {\n\n    /*@ngInject;*/\n\n    function CheckoutCtrl(DonationService, $location, $localStorage) {\n        _classCallCheck(this, CheckoutCtrl);\n\n        if (!DonationService.donationData().isValid()) {\n            $location.path('/');\n        }\n        this.donationService = DonationService;\n        this.paymentInfo = {};\n        this.isRequestActive = false;\n        this.location = $location;\n        this.localStorage = $localStorage;\n    }\n\n    _createClass(CheckoutCtrl, [{\n        key: \"performCheckout\",\n        value: function performCheckout(paymentForm) {\n            var _this = this;\n\n            if (!paymentForm.$valid) {\n                Materialize.toast(\"Please verify the fields and try again.\", 5000, \"error\");\n            }\n\n            var onError = function onError(response) {\n                _this.isRequestActive = false;\n                Materialize.toast(\"Oops Something went wrong while contacting the server, please verify the fields and try again.\", 5000, \"error\");\n            };\n\n            var onSuccess = function onSuccess(data) {\n                Materialize.toast(\"Donation successfully completed!!!\", 5000, \"success\");\n                _this.isRequestActive = false;\n                _this.localStorage.paymentInfo = data;\n                _this.localStorage.paymentInfo.paidOnTimeStamp = new Date().getTime();\n                _this.location.path(\"/paymentCompleted\");\n            };\n\n            this.isRequestActive = true;\n\n            this.donationService.performPayment(this.paymentInfo, onSuccess, onError);\n        }\n    }]);\n\n    return CheckoutCtrl;\n})();\n\nexports[\"default\"] = CheckoutCtrl;\nmodule.exports = exports[\"default\"];\n\n},{}],3:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _modelsDonationModel = require('../models/DonationModel');\n\nvar _modelsDonationModel2 = _interopRequireDefault(_modelsDonationModel);\n\nvar DonationCtrl = (function () {\n\n  /*@ngInject;*/\n\n  function DonationCtrl($location, DonationService) {\n    _classCallCheck(this, DonationCtrl);\n\n    this.donateData = {};\n    this.DonationService = DonationService;\n    this.location = $location;\n    this.currencyOptions = _modelsDonationModel2[\"default\"].currencyOptions;\n\n    this.donateData.currency = this.currencyOptions[0].val;\n  }\n\n  _createClass(DonationCtrl, [{\n    key: \"donate\",\n    value: function donate(donateForm) {\n\n      if (!donateForm.$valid) {\n        Materialize.toast(\"Please verify the fields and try again.\", 5000, \"error\");\n        return;\n      }\n\n      /**\r\n       * Using array.some to verify if the selected option exists within out $scope.currencyOptions array\r\n       * @type {{val: (*|Document.donateForm.currency), label: (*|Document.donateForm.currency)}}\r\n       */\n\n      var donationData = this.donateData;\n      if (!this.currencyOptions.some(function (ele) {\n        return donationData.currency == ele.val;\n      })) {\n        Materialize.toast(\"Please select a valid currency.\", 5000, \"error\");\n        return;\n      }\n\n      /**\r\n       * Verifying the amount contains a numeric value less or igual than 100 and greater than 0\r\n       */\n      if (isNaN(parseFloat(this.donateData.amount)) || this.donateData.amount > 100 || this.donateData.amount < 0) {\n        Materialize.toast(\"Please type a valid amount, cannot be greater than 100 and lower than 0.\", 5000, \"error\");\n        return;\n      }\n      /*\r\n       * If we reach this point it means we are good to go\r\n       * We save the selected that for use later on\r\n       * */\n      this.DonationService.saveDonationData(this.donateData);\n\n      this.location.path('/checkout');\n    }\n  }]);\n\n  return DonationCtrl;\n})();\n\nexports[\"default\"] = DonationCtrl;\nmodule.exports = exports[\"default\"];\n\n},{\"../models/DonationModel\":5}],4:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar PaymentCompletedCtrl = (function () {\n\n    /*@ngInject;*/\n\n    function PaymentCompletedCtrl($location, $scope, DonationService) {\n        var _this = this;\n\n        _classCallCheck(this, PaymentCompletedCtrl);\n\n        this.endTime = DonationService.getPaymentInformation().paidOnTimeStamp + 3600000;\n        this.isUserAllowedToDonate = DonationService.isUserAllowedToDonate();\n        this.donationService = DonationService;\n        this.location = $location;\n        this.scope = $scope;\n        this.paymentInformation = DonationService.getPaymentInformation();\n\n        var onTimerStopped = function onTimerStopped(event, data) {\n            _this.donationService.restoreDonation();\n            _this.isUserAllowedToDonate = true;\n            _this.scope.$apply();\n        };\n\n        this.scope.$on('timer-stopped', onTimerStopped);\n    }\n\n    _createClass(PaymentCompletedCtrl, [{\n        key: \"redirect\",\n        value: function redirect() {\n            this.location.path(\"/\");\n        }\n    }]);\n\n    return PaymentCompletedCtrl;\n})();\n\nexports[\"default\"] = PaymentCompletedCtrl;\nmodule.exports = exports[\"default\"];\n\n},{}],5:[function(require,module,exports){\n/*\r\n  Model classes can be exported and imported directly (not using AngularJS' dependency injection).\r\n*/\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar DonationModel = (function () {\n\tfunction DonationModel() {\n\t\t_classCallCheck(this, DonationModel);\n\n\t\tthis.amount = \"\";\n\t\tthis.currency = \"\";\n\t}\n\n\t_createClass(DonationModel, [{\n\t\tkey: \"isValid\",\n\t\tvalue: function isValid() {\n\n\t\t\t/**\r\n    * Using array.some to verify if the selected option exists within out $scope.currencyOptions array\r\n    * @type {{val: (*|Document.donateForm.currency), label: (*|Document.donateForm.currency)}}\r\n    */\n\n\t\t\tvar currency = this.currency;\n\t\t\tif (!DonationModel.currencyOptions.some(function (ele) {\n\t\t\t\treturn currency == ele.val;\n\t\t\t})) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t/**\r\n    * Verifying the amount contains a numeric value less or igual than 100 and greater than 0\r\n    */\n\t\t\tif (isNaN(parseFloat(this.amount)) || this.amount > 100 || this.amount < 0) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn true;\n\t\t}\n\t}], [{\n\t\tkey: \"currencyOptions\",\n\t\tget: function get() {\n\t\t\treturn [{ val: \"EUR\", label: \"EUR\" }, { val: \"USD\", label: \"USD\" }];\n\t\t}\n\t}]);\n\n\treturn DonationModel;\n})();\n\nexports[\"default\"] = DonationModel;\nmodule.exports = exports[\"default\"];\n\n},{}],6:[function(require,module,exports){\n/**\r\n * Created by lupena on 3/31/2016.\r\n */\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar _modelsDonationModel = require('../models/DonationModel');\n\nvar _modelsDonationModel2 = _interopRequireDefault(_modelsDonationModel);\n\nvar DonationService = (function () {\n  /*@ngInject;*/\n\n  function DonationService($resource, ConfigData, $localStorage) {\n    _classCallCheck(this, DonationService);\n\n    this.resource = $resource(ConfigData.url);\n    this.donationDataObject = new _modelsDonationModel2['default']();\n    this.configData = ConfigData;\n    this.localStorage = $localStorage;\n  }\n\n  _createClass(DonationService, [{\n    key: 'donationData',\n    value: function donationData() {\n      return this.donationDataObject;\n    }\n  }, {\n    key: 'saveDonationData',\n    value: function saveDonationData(donateData) {\n      this.donationDataObject.amount = donateData.amount;\n      this.donationDataObject.currency = donateData.currency;\n    }\n  }, {\n    key: 'performPayment',\n    value: function performPayment(paymentInformation, onSuccess, onError) {\n\n      var requestData = {};\n      /**\r\n       *  Setting up the request data see https://docs.payon.com/tutorials/server-to-server\r\n       */\n      requestData['card.expiryMonth'] = paymentInformation.expiry.split(\"/\")[0];\n      requestData['card.expiryYear'] = paymentInformation.expiry.split(\"/\")[1];\n\n      requestData['card.number'] = paymentInformation.card.number;\n      requestData['card.cvv'] = paymentInformation.card.cvv;\n\n      requestData = $.extend(requestData, this.configData.authData);\n      requestData = $.extend(requestData, this.donationDataObject);\n      requestData['paymentType'] = this.configData.paymentType;\n\n      this.resource.save({}, $.param(requestData)).$promise.then(function (responseData) {\n\n        if (responseData.id) {\n          onSuccess(responseData);\n        } else {\n          onError(responseData);\n        }\n      })['catch'](function (response) {\n        onError(response);\n      });\n    }\n  }, {\n    key: 'getRemainingTimeUntilNextDonation',\n    value: function getRemainingTimeUntilNextDonation() {\n      if (typeof this.localStorage.paymentInfo === 'undefined') return -1;\n\n      return 3600 - (new Date().getTime() - this.localStorage.paymentInfo.paidOnTimeStamp) / 1000;\n    }\n  }, {\n    key: 'isUserAllowedToDonate',\n    value: function isUserAllowedToDonate() {\n      if (typeof this.localStorage.paymentInfo === 'undefined') return true;\n      return this.getRemainingTimeUntilNextDonation() <= 0;\n    }\n  }, {\n    key: 'restoreDonation',\n    value: function restoreDonation() {\n      delete this.localStorage.paymentInfo;\n    }\n  }, {\n    key: 'getPaymentInformation',\n    value: function getPaymentInformation() {\n      return this.localStorage.paymentInfo;\n    }\n  }]);\n\n  return DonationService;\n})();\n\nexports['default'] = DonationService;\nmodule.exports = exports['default'];\n\n},{\"../models/DonationModel\":5}]},{},[1])\n\n","/*\r\n Import all Angular components via ES6 imports and register them\r\n at your module via their corresponding functions (controller, service, etc.).\r\n */\r\n\r\nimport DonationCtrl from './controllers/DonationCtrl';\r\nimport CheckoutCtrl from './controllers/CheckoutCtrl';\r\nimport PaymentCompletedCtrl from './controllers/PaymentCompletedCtrl';\r\nimport DonationService from './services/DonationService';\r\n\r\nangular\r\n    .module('chancletagithubioApp', [\r\n        'ngResource',\r\n        'ngRoute',\r\n        'ngStorage',\r\n        'angularPayments',\r\n        'timer'\r\n    ])\r\n    .controller('DonationCtrl', DonationCtrl)\r\n    .controller('CheckoutCtrl', CheckoutCtrl)\r\n    .controller('PaymentCompletedCtrl', PaymentCompletedCtrl)\r\n    .service('DonationService', DonationService)\r\n    .config([\"$routeProvider\", \"$httpProvider\", function ($routeProvider, $httpProvider) {\r\n        $routeProvider\r\n            .when('/', {\r\n                templateUrl: 'views/donationForm.html',\r\n                controller: 'DonationCtrl',\r\n                controllerAs: 'donation'\r\n            })\r\n            .when('/checkout', {\r\n                templateUrl: 'views/checkoutForm.html',\r\n                controller: 'CheckoutCtrl',\r\n                controllerAs: 'checkout'\r\n            })\r\n            .when('/paymentCompleted', {\r\n                templateUrl: 'views/paymentCompleted.html',\r\n                controller: 'PaymentCompletedCtrl',\r\n                controllerAs: 'completed'\r\n            })\r\n            .otherwise({\r\n                redirectTo: '/'\r\n            });\r\n        $httpProvider.interceptors.push(['$q', '$location', '$localStorage', function ($q, $location, $localStorage) {\r\n            return {\r\n                'request': function (config) {\r\n                    config.headers = config.headers || {};\r\n                    config.headers['Content-Type'] = 'application/x-www-form-urlencoded; charset=UTF-8';\r\n                    return config;\r\n                }\r\n            };\r\n\r\n\r\n        }]);\r\n    }])\r\n    .constant(\"ConfigData\", {\r\n        url: \"https://test.oppwa.com/v1/payments\",\r\n        authData: {\r\n            'authentication.userId': \"8a8294174b7ecb28014b9699220015cc\",\r\n            'authentication.password': \"sy6KJsT8\",\r\n            'authentication.entityId': \"8a8294174b7ecb28014b9699220015ca\"\r\n        },\r\n        paymentType: \"DB\",\r\n    }).\r\n    run([\"DonationService\", \"$location\",\"$rootScope\", function (DonationService, $location,$rootScope) {\r\n\r\n        $rootScope.$on( \"$routeChangeStart\", function(event, next, current) {\r\n\r\n            if(next.templateUrl != \"views/paymentCompleted.html\"){\r\n               if (!DonationService.isUserAllowedToDonate()) {\r\n                   $location.path(\"/paymentCompleted\");\r\n               }\r\n           }else{\r\n                if (DonationService.isUserAllowedToDonate()) {\r\n                    $location.path(\"/\");\r\n                }\r\n            }\r\n\r\n            if(DonationService.getRemainingTimeUntilNextDonation() <= 0){\r\n                DonationService.restoreDonation();\r\n            }\r\n        });\r\n\r\n\r\n    }]);\r\n","\r\nexport default class CheckoutCtrl {\r\n\r\n    /*@ngInject;*/\r\n    constructor(DonationService,$location,$localStorage) {\r\n        if(!DonationService.donationData().isValid()){\r\n            $location.path('/');\r\n        }\r\n        this.donationService = DonationService;\r\n        this.paymentInfo = {};\r\n        this.isRequestActive = false;\r\n        this.location = $location;\r\n        this.localStorage = $localStorage;\r\n    }\r\n\r\n    performCheckout(paymentForm){\r\n\r\n        if(!paymentForm.$valid){\r\n            Materialize.toast(\"Please verify the fields and try again.\", 5000, \"error\");\r\n        }\r\n\r\n        let onError = (response) => {\r\n            this.isRequestActive = false;\r\n            Materialize.toast(\"Oops Something went wrong while contacting the server, please verify the fields and try again.\", 5000, \"error\");\r\n        };\r\n\r\n        let onSuccess = (data) => {\r\n            Materialize.toast(\"Donation successfully completed!!!\", 5000, \"success\");\r\n            this.isRequestActive = false;\r\n            this.localStorage.paymentInfo = data;\r\n            this.localStorage.paymentInfo.paidOnTimeStamp = new Date().getTime();\r\n            this.location.path(\"/paymentCompleted\");\r\n        };\r\n\r\n        this.isRequestActive = true;\r\n\r\n        this.donationService.performPayment(this.paymentInfo, onSuccess, onError);\r\n\r\n    }\r\n\r\n}\r\n","import DonationModel from '../models/DonationModel';\r\n\r\nexport default class DonationCtrl {\r\n\r\n  /*@ngInject;*/\r\n  constructor($location, DonationService) {\r\n\r\n    this.donateData = {};\r\n    this.DonationService = DonationService;\r\n    this.location = $location;\r\n    this.currencyOptions = DonationModel.currencyOptions;\r\n\r\n    this.donateData.currency = this.currencyOptions[0].val;\r\n\r\n\r\n  }\r\n\r\n  donate(donateForm){\r\n\r\n      if (!donateForm.$valid) {\r\n        Materialize.toast(\"Please verify the fields and try again.\", 5000, \"error\");\r\n        return;\r\n      }\r\n\r\n      /**\r\n       * Using array.some to verify if the selected option exists within out $scope.currencyOptions array\r\n       * @type {{val: (*|Document.donateForm.currency), label: (*|Document.donateForm.currency)}}\r\n       */\r\n\r\n      let donationData = this.donateData;\r\n      if (!this.currencyOptions.some(function(ele){ return donationData.currency == ele.val})) {\r\n        Materialize.toast(\"Please select a valid currency.\", 5000, \"error\");\r\n        return;\r\n      }\r\n\r\n      /**\r\n       * Verifying the amount contains a numeric value less or igual than 100 and greater than 0\r\n       */\r\n      if (isNaN(parseFloat(this.donateData.amount)) || this.donateData.amount > 100 || this.donateData.amount < 0) {\r\n        Materialize.toast(\"Please type a valid amount, cannot be greater than 100 and lower than 0.\", 5000, \"error\");\r\n        return;\r\n      }\r\n      /*\r\n       * If we reach this point it means we are good to go\r\n       * We save the selected that for use later on\r\n       * */\r\n      this.DonationService.saveDonationData(this.donateData);\r\n\r\n      this.location.path('/checkout');\r\n\r\n    }\r\n\r\n}\r\n\r\n","\r\nexport default class PaymentCompletedCtrl {\r\n\r\n    /*@ngInject;*/\r\n    constructor($location,$scope,DonationService) {\r\n\r\n        this.endTime = DonationService.getPaymentInformation().paidOnTimeStamp + 3600000;\r\n        this.isUserAllowedToDonate = DonationService.isUserAllowedToDonate();\r\n        this.donationService = DonationService;\r\n        this.location = $location;\r\n        this.scope = $scope;\r\n        this.paymentInformation =  DonationService.getPaymentInformation();\r\n\r\n        let onTimerStopped = (event,data) => {\r\n            this.donationService.restoreDonation();\r\n            this.isUserAllowedToDonate = true;\r\n            this.scope.$apply();\r\n        };\r\n\r\n\r\n        this.scope.$on('timer-stopped', onTimerStopped);\r\n    }\r\n\r\n    redirect(){\r\n        this.location.path(\"/\");\r\n    }\r\n}\r\n","/*\r\n  Model classes can be exported and imported directly (not using AngularJS' dependency injection).\r\n*/\r\n\r\nexport default class DonationModel {\r\n\r\n\tconstructor(){\r\n\t\tthis.amount = \"\";\r\n\t\tthis.currency = \"\";\r\n\t}\r\n\r\n\tstatic get \tcurrencyOptions(){\r\n\t\treturn [{val: \"EUR\", label: \"EUR\"},{val: \"USD\", label: \"USD\"}];\r\n\t}\r\n\r\n\tisValid(){\r\n\r\n\t\t/**\r\n\t\t * Using array.some to verify if the selected option exists within out $scope.currencyOptions array\r\n\t\t * @type {{val: (*|Document.donateForm.currency), label: (*|Document.donateForm.currency)}}\r\n\t\t */\r\n\r\n\t\tlet currency = this.currency;\r\n\t\tif (!DonationModel.currencyOptions.some(function(ele){ return currency == ele.val})) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Verifying the amount contains a numeric value less or igual than 100 and greater than 0\r\n\t\t */\r\n\t\tif (isNaN(parseFloat(this.amount)) || this.amount > 100 || this.amount < 0) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t}\r\n\r\n}","/**\r\n * Created by lupena on 3/31/2016.\r\n */\r\nimport DonationModel from '../models/DonationModel';\r\n\r\nexport default class DonationService{\r\n  /*@ngInject;*/\r\n  constructor($resource,ConfigData,$localStorage) {\r\n    this.resource = $resource(ConfigData.url);\r\n    this.donationDataObject = new DonationModel();\r\n    this.configData = ConfigData;\r\n    this.localStorage = $localStorage;\r\n  }\r\n\r\n  donationData(){\r\n    return this.donationDataObject;\r\n  }\r\n\r\n  saveDonationData(donateData){\r\n    this.donationDataObject.amount = donateData.amount;\r\n    this.donationDataObject.currency = donateData.currency;\r\n  }\r\n\r\n  performPayment (paymentInformation, onSuccess, onError){\r\n\r\n    var requestData = {};\r\n    /**\r\n     *  Setting up the request data see https://docs.payon.com/tutorials/server-to-server\r\n     */\r\n    requestData['card.expiryMonth'] = paymentInformation.expiry.split(\"/\")[0];\r\n    requestData['card.expiryYear'] = paymentInformation.expiry.split(\"/\")[1];\r\n\r\n    requestData['card.number'] = paymentInformation.card.number;\r\n    requestData['card.cvv'] = paymentInformation.card.cvv;\r\n\r\n    requestData = $.extend(requestData, this.configData.authData);\r\n    requestData =  $.extend(requestData, this.donationDataObject );\r\n    requestData['paymentType'] = this.configData.paymentType;\r\n\r\n    this.resource.save({},$.param(requestData)).\r\n      $promise.\r\n      then(function(responseData){\r\n\r\n      if(responseData.id){\r\n        onSuccess(responseData);\r\n      }else{\r\n        onError(responseData);\r\n      }\r\n      })\r\n      .catch(function(response){\r\n        onError(response);\r\n      });\r\n  }\r\n\r\n  getRemainingTimeUntilNextDonation(){\r\n    if(typeof this.localStorage.paymentInfo === 'undefined')\r\n      return -1;\r\n\r\n    return  3600 - (new Date().getTime() - this.localStorage.paymentInfo.paidOnTimeStamp)/1000;\r\n  }\r\n\r\n  isUserAllowedToDonate(){\r\n    if(typeof this.localStorage.paymentInfo === 'undefined')\r\n        return true;\r\n    return this.getRemainingTimeUntilNextDonation() <= 0;\r\n  }\r\n\r\n  restoreDonation(){\r\n    delete  this.localStorage.paymentInfo;\r\n  }\r\n\r\n  getPaymentInformation(){\r\n    return this.localStorage.paymentInfo;\r\n  }\r\n}\r\n"],"sourceRoot":"/source/"}